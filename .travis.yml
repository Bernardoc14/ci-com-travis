# .travis.yml - Configura√ß√£o CI/CD para React App

# 1. Configura√ß√£o do Ambiente
language: node_js
node_js:
  - "lts/*" # Recomenda-se usar 'lts/*' (Long Term Support) em vez de 'stable'
cache:
  directories:
    - node_modules

# 2. Gatilhos (Triggers)
branches:
  only:
    - main # Branch principal
    - dev  # Branch de desenvolvimento

# 3. Etapa de Instala√ß√£o e Build (CI)
# O Travis executa automaticamente 'npm install' antes do 'script'. 
# Vamos explicit√°-la e remover a se√ß√£o 'install' vazia.
install:
  - npm install # Garante que todas as depend√™ncias estejam instaladas

script:
  # üõë REMOVE 'npm start'! O objetivo √© apenas compilar.
  - npm run build # Este comando cria a pasta 'build'

# 4. Configura√ß√£o de Deploy (CD) - Adicionada para o GitHub Pages
deploy:
  provider: pages           # Provedor do GitHub Pages
  skip_cleanup: true        # N√£o limpa a pasta de build antes do deploy
  local-dir: build          # A pasta gerada pelo 'npm run build'
  github-token: $GITHUB_TOKEN # Usa o Token de Acesso Pessoal (PAT) SEGURO da vari√°vel de ambiente
  target-branch: gh-pages   # Branch para onde o conte√∫do compilado ser√° enviado
  email: seu-email@exemplo.com # ‚¨ÖÔ∏è Substitua pelo seu email do GitHub
  name: Seu Nome de Usu√°rio    # ‚¨ÖÔ∏è Substitua pelo seu nome de usu√°rio
  on:
    branch: main # S√≥ faz deploy quando a branch 'main' √© atualizada